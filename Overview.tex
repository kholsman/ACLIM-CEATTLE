\documentclass[]{article}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\usepackage{fixltx2e} % provides \textsubscript
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
\else % if luatex or xelatex
  \ifxetex
    \usepackage{mathspec}
  \else
    \usepackage{fontspec}
  \fi
  \defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}
\fi
% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
% use microtype if available
\IfFileExists{microtype.sty}{%
\usepackage{microtype}
\UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\usepackage[margin=1in]{geometry}
\usepackage[unicode=true]{hyperref}
\hypersetup{
            pdftitle={ACLIM - CEATTLE simulations},
            pdfauthor={Kirstin Holsman},
            pdfborder={0 0 0},
            breaklinks=true}
\urlstyle{same}  % don't use monospace font for urls
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{{#1}}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{{#1}}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{{#1}}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{{#1}}}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{{#1}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{{#1}}}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{{#1}}}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{{#1}}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{{#1}}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{{#1}}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{{#1}}}
\newcommand{\ImportTok}[1]{{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{{#1}}}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{{#1}}}}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{{#1}}}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{{#1}}}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{{#1}}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{{#1}}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{{#1}}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{{#1}}}}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{{#1}}}}
\newcommand{\BuiltInTok}[1]{{#1}}
\newcommand{\ExtensionTok}[1]{{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{{#1}}}
\newcommand{\RegionMarkerTok}[1]{{#1}}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{{#1}}}}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{{#1}}}}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{{#1}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{{#1}}}}
\newcommand{\NormalTok}[1]{{#1}}
\usepackage{longtable,booktabs}
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
\IfFileExists{parskip.sty}{%
\usepackage{parskip}
}{% else
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt plus 2pt minus 1pt}
}
\setlength{\emergencystretch}{3em}  % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{0}
% Redefines (sub)paragraphs to behave more like sections
\ifx\paragraph\undefined\else
\let\oldparagraph\paragraph
\renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
\let\oldsubparagraph\subparagraph
\renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi

\title{ACLIM - CEATTLE simulations}
\author{Kirstin Holsman}
\date{}

\begin{document}
\maketitle

CEATTLE ACLIM Repo:
\href{https://github.com/kholsman/ACLIM-CEATTLE}{\textbf{github.com/kholsman/ACLIM-CEATTLE}}

\paragraph{Repo and data files maintained
by:}\label{repo-and-data-files-maintained-by}

\begin{itemize}
\tightlist
\item
  Kirstin Holsman\\
  Alaska Fisheries Science Center\\
  NOAA Fisheries, Seattle WA\\
  \textbf{\href{mailto:kirstin.holsman@noaa.gov}{\nolinkurl{kirstin.holsman@noaa.gov}}}\\
  \emph{Last updated: Aug 12, 2020}
\end{itemize}

\subsection{1 Overview}\label{overview}

This document summaries the CEATTLE multispecies stock assessment model
simulations conducted as part of the Alaska Climate Integrated Modeling
(ACLIM) project multimodel comparison. The simulations included in this
evaluation are available for download and use with permission from
\href{mailto:kirstin.holsman@noaa.gov}{\nolinkurl{kirstin.holsman@noaa.gov}}.

With permission, please also cite this data as:

{[} TO ADD {]}

\subsection{1.1 ACLIM Overview}\label{aclim-overview}

Various simulation outputs were made available for use in this analysis
through the interdisciplinary
\href{\%22https://www.fisheries.noaa.gov/alaska/ecosystems/alaska-climate-integrated-modeling-project\%22}{Alaska
Climate Integrated Modeling (ACLIM) project}. An overview of the project
and simulation experiments can be found in
\href{\%22https://www.frontiersin.org/articles/10.3389/fmars.2019.00775/full\%22}{Hollowed
et al. 2020}.

\subsection{1.2 Climate scenarios}\label{climate-scenarios}

The simulations include the model fit to data from 1979 - 2017 and
projections derived from ACLIM suite of CMIP5 downscaled projections
under various representative concentration pathways (note bold scenarios
are those included in the Holsman et al. 2020 paper):

\subsubsection{Table 1: Climate
scenarios:}\label{table-1-climate-scenarios}

\begin{longtable}[]{@{}lllllll@{}}
\toprule
CMIPx ARx & GCM & Scenario & Def & Years & ROMSNPZ Model &
Source\tabularnewline
\midrule
\endhead
na & CORECFS & hindcast & ACLIM Hindcast & 1970 - 2017 & H16 &
ACLIM\tabularnewline
na & CORECFS & Persistence & Avg. 10 y hind. & 2018 - 2100 & H16 &
ACLIM\tabularnewline
CMIP3 AR4 & MIROC & A1B & Med baseline & 2006 - 2048 & H16 &
BSIERP\tabularnewline
CMIP3 AR4 & ECHOG & A1B & Med baseline & 2006 - 2048 & H16 &
BSIERP\tabularnewline
CMIP3 AR4 & CCCMA & A1B & Med baseline & 2006 - 2048 & H16 &
BSIERP\tabularnewline
CMIP5 AR5 & GFDL & RCP 4.5 & Med. mitigation & 2006 - 2100 & H16 &
ACLIM/FATE\tabularnewline
\textbf{CMIP5 AR5} & MIROC & RCP 4.5 & Med. mitigation & 2006 - 2100 &
H16 & ACLIM/FATE\tabularnewline
\textbf{CMIP5 AR5} & CESM & RCP 4.5 & Med. mitigation & 2006 - 2100 &
H16 & ACLIM/FATE\tabularnewline
\textbf{CMIP5 AR5} & GFDL & RCP 8.5 & High baseline & 2006 - 2100 & H16
& ACLIM/FATE\tabularnewline
\textbf{CMIP5 AR5} & MIROC & RCP 8.5 & High baseline & 2006 - 2100 & H16
& ACLIM/FATE\tabularnewline
\textbf{CMIP5 AR5} & CESM & RCP 8.5 & High baseline & 2006 - 2080 & H16
& ACLIM/FATE\tabularnewline
CMIP5 AR5 & CESM & RCP 8.5bio* & High baseline & 2006 - 2080 & H16 &
ACLIM/FATE\tabularnewline
CMIP5 AR5 & GFDL & RCP 8.5bio* & High baseline & 2006 - 2100 & H16 &
ACLIM/FATE\tabularnewline
\bottomrule
\end{longtable}

For more information about the downscaling models underpinning these
simulations see Hermann et al. 2016,2019 and Kearney et al. 2020.

\subsection{1.3 CEATTLE trophic and harvest
scenarios:}\label{ceattle-trophic-and-harvest-scenarios}

Included in the simulation set below (see code) are 4 core simulations
as part of the Holsman et al. 2020 Nature Communications paper. Those
are summarized as:

\subsubsection{Table 2: Managment and model
scenarios:}\label{table-2-managment-and-model-scenarios}

\begin{longtable}[]{@{}llllllll@{}}
\toprule
\begin{minipage}[b]{0.16\columnwidth}\raggedright\strut
Simulation\strut
\end{minipage} & \begin{minipage}[b]{0.06\columnwidth}\raggedright\strut
Trophic\strut
\end{minipage} & \begin{minipage}[b]{0.13\columnwidth}\raggedright\strut
HCR\strut
\end{minipage} & \begin{minipage}[b]{0.10\columnwidth}\raggedright\strut
Harvest Scenario\strut
\end{minipage} & \begin{minipage}[b]{0.11\columnwidth}\raggedright\strut
Recruitment\strut
\end{minipage} & \begin{minipage}[b]{0.10\columnwidth}\raggedright\strut
Model\strut
\end{minipage} & \begin{minipage}[b]{0.08\columnwidth}\raggedright\strut
Source\strut
\end{minipage} & \begin{minipage}[b]{0.05\columnwidth}\raggedright\strut
MC\strut
\end{minipage}\tabularnewline
\midrule
\endhead
\begin{minipage}[t]{0.16\columnwidth}\raggedright\strut
ssm\_noCap\strut
\end{minipage} & \begin{minipage}[t]{0.06\columnwidth}\raggedright\strut
No\strut
\end{minipage} & \begin{minipage}[t]{0.13\columnwidth}\raggedright\strut
CNaive B0 \& B40, CE-SL\_HCR\strut
\end{minipage} & \begin{minipage}[t]{0.10\columnwidth}\raggedright\strut
C = ABC\strut
\end{minipage} & \begin{minipage}[t]{0.11\columnwidth}\raggedright\strut
ricker + covars\strut
\end{minipage} & \begin{minipage}[t]{0.10\columnwidth}\raggedright\strut
CEATTLE\strut
\end{minipage} & \begin{minipage}[t]{0.08\columnwidth}\raggedright\strut
ACLIM\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright\strut
no (mean)\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.16\columnwidth}\raggedright\strut
msm\_noCap\strut
\end{minipage} & \begin{minipage}[t]{0.06\columnwidth}\raggedright\strut
Yes\strut
\end{minipage} & \begin{minipage}[t]{0.13\columnwidth}\raggedright\strut
CNaive B0 \& B40, CE-SL\_HCR\strut
\end{minipage} & \begin{minipage}[t]{0.10\columnwidth}\raggedright\strut
C = ABC\strut
\end{minipage} & \begin{minipage}[t]{0.11\columnwidth}\raggedright\strut
ricker + covars\strut
\end{minipage} & \begin{minipage}[t]{0.10\columnwidth}\raggedright\strut
CEATTLE\strut
\end{minipage} & \begin{minipage}[t]{0.08\columnwidth}\raggedright\strut
ACLIM\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright\strut
no (mean)\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.16\columnwidth}\raggedright\strut
ssm\_2mtCap\strut
\end{minipage} & \begin{minipage}[t]{0.06\columnwidth}\raggedright\strut
No\strut
\end{minipage} & \begin{minipage}[t]{0.13\columnwidth}\raggedright\strut
CNaive B0 \& B40, CE-SL\_HCR\strut
\end{minipage} & \begin{minipage}[t]{0.10\columnwidth}\raggedright\strut
C = ATTACH (f\textasciitilde{}ABC)\strut
\end{minipage} & \begin{minipage}[t]{0.11\columnwidth}\raggedright\strut
ricker + covars\strut
\end{minipage} & \begin{minipage}[t]{0.10\columnwidth}\raggedright\strut
CEATTLE\strut
\end{minipage} & \begin{minipage}[t]{0.08\columnwidth}\raggedright\strut
ACLIM\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright\strut
no (mean)\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.16\columnwidth}\raggedright\strut
msm\_2mtCap\strut
\end{minipage} & \begin{minipage}[t]{0.06\columnwidth}\raggedright\strut
Yes\strut
\end{minipage} & \begin{minipage}[t]{0.13\columnwidth}\raggedright\strut
CNaive B0 \& B40, CE-SL\_HCR\strut
\end{minipage} & \begin{minipage}[t]{0.10\columnwidth}\raggedright\strut
C = ATTACH (f\textasciitilde{}ABC)\strut
\end{minipage} & \begin{minipage}[t]{0.11\columnwidth}\raggedright\strut
ricker + covars\strut
\end{minipage} & \begin{minipage}[t]{0.10\columnwidth}\raggedright\strut
CEATTLE\strut
\end{minipage} & \begin{minipage}[t]{0.08\columnwidth}\raggedright\strut
ACLIM\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright\strut
no (mean)\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.16\columnwidth}\raggedright\strut
ssm\_noCapMC\strut
\end{minipage} & \begin{minipage}[t]{0.06\columnwidth}\raggedright\strut
No\strut
\end{minipage} & \begin{minipage}[t]{0.13\columnwidth}\raggedright\strut
CNaive B0 \& B40, CE-SL\_HCR\strut
\end{minipage} & \begin{minipage}[t]{0.10\columnwidth}\raggedright\strut
C = ABC\strut
\end{minipage} & \begin{minipage}[t]{0.11\columnwidth}\raggedright\strut
ricker + covars\strut
\end{minipage} & \begin{minipage}[t]{0.10\columnwidth}\raggedright\strut
CEATTLE\strut
\end{minipage} & \begin{minipage}[t]{0.08\columnwidth}\raggedright\strut
ACLIM\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright\strut
1-100\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.16\columnwidth}\raggedright\strut
msm\_noCapMC\strut
\end{minipage} & \begin{minipage}[t]{0.06\columnwidth}\raggedright\strut
Yes\strut
\end{minipage} & \begin{minipage}[t]{0.13\columnwidth}\raggedright\strut
CNaive B0 \& B40, CE-SL\_HCR\strut
\end{minipage} & \begin{minipage}[t]{0.10\columnwidth}\raggedright\strut
C = ABC\strut
\end{minipage} & \begin{minipage}[t]{0.11\columnwidth}\raggedright\strut
ricker + covars\strut
\end{minipage} & \begin{minipage}[t]{0.10\columnwidth}\raggedright\strut
CEATTLE\strut
\end{minipage} & \begin{minipage}[t]{0.08\columnwidth}\raggedright\strut
ACLIM\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright\strut
1-100\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.16\columnwidth}\raggedright\strut
ssm\_2mtCapMC\strut
\end{minipage} & \begin{minipage}[t]{0.06\columnwidth}\raggedright\strut
No\strut
\end{minipage} & \begin{minipage}[t]{0.13\columnwidth}\raggedright\strut
CNaive B0 \& B40, CE-SL\_HCR\strut
\end{minipage} & \begin{minipage}[t]{0.10\columnwidth}\raggedright\strut
C = ATTACH (f\textasciitilde{}ABC)\strut
\end{minipage} & \begin{minipage}[t]{0.11\columnwidth}\raggedright\strut
ricker + covars\strut
\end{minipage} & \begin{minipage}[t]{0.10\columnwidth}\raggedright\strut
CEATTLE\strut
\end{minipage} & \begin{minipage}[t]{0.08\columnwidth}\raggedright\strut
ACLIM\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright\strut
1-100\strut
\end{minipage}\tabularnewline
\begin{minipage}[t]{0.16\columnwidth}\raggedright\strut
msm\_2mtCapMC\strut
\end{minipage} & \begin{minipage}[t]{0.06\columnwidth}\raggedright\strut
Yes\strut
\end{minipage} & \begin{minipage}[t]{0.13\columnwidth}\raggedright\strut
CNaive B0 \& B40, CE-SL\_HCR\strut
\end{minipage} & \begin{minipage}[t]{0.10\columnwidth}\raggedright\strut
C = ATTACH (f\textasciitilde{}ABC)\strut
\end{minipage} & \begin{minipage}[t]{0.11\columnwidth}\raggedright\strut
ricker + covars\strut
\end{minipage} & \begin{minipage}[t]{0.10\columnwidth}\raggedright\strut
CEATTLE\strut
\end{minipage} & \begin{minipage}[t]{0.08\columnwidth}\raggedright\strut
ACLIM\strut
\end{minipage} & \begin{minipage}[t]{0.05\columnwidth}\raggedright\strut
1-31\strut
\end{minipage}\tabularnewline
\bottomrule
\end{longtable}

Where ``Trophic'' indicates if multispecies interactions where included
(i.e., single or multispecies modes); ``HCR'' is the approach to the
harvest control rule indicating whether reference points (B0 and B40)
and the sloping harvest control rule (SL\_HCR) were determined from
persistence scenarios (i.e., climate naive or `CNaive') or from
scenarios with climate acting on growth, predation, and recruitment
(i.e., climate-enhanced or `CE'); the harvest scenario applied (i.e.,
Catch = ABC or Catch is a function of TAC and ABC via the ATTACH()
model); Recruitment relationship; the multispecies model used, the
source of the simulations, and whether the simulations include random
draws from the recruitment relationship parameters (MC\textgreater{}0).

\section{2 Getting started:}\label{getting-started}

\subsection{2.1. Download the code from the github
repository:}\label{download-the-code-from-the-github-repository}

\begin{Shaded}
\begin{Highlighting}[]
    \CommentTok{# download the code:}
    \NormalTok{main_nm       <-}\StringTok{ "ACLIM-CEATTLE-Master"}
    \NormalTok{download_path <-}\StringTok{ }\KeywordTok{path.expand}\NormalTok{(}\StringTok{"~/desktop"}\NormalTok{)}
    \NormalTok{main          <-}\StringTok{ }\KeywordTok{file.path}\NormalTok{(download_path,main_nm)}
   
    \CommentTok{# download the code:}
    \NormalTok{dest_file     <-}\StringTok{ }\KeywordTok{file.path}\NormalTok{(download_path,}\KeywordTok{paste0}\NormalTok{(main_nm,}\StringTok{".zip"}\NormalTok{))}
    \NormalTok{url           <-}\StringTok{"https://github.com/kholsman/ACLIM-CEATTLE/archive/master.zip"}
    \KeywordTok{download.file}\NormalTok{(}\DataTypeTok{url=}\NormalTok{url, }\DataTypeTok{destfile=}\NormalTok{dest_file)}
    
    \CommentTok{# unzip the .zip file}
    \KeywordTok{setwd}\NormalTok{(download_path)}
    \KeywordTok{unzip} \NormalTok{(dest_file, }\DataTypeTok{exdir =} \StringTok{"./"}\NormalTok{,}\DataTypeTok{overwrite =} \NormalTok{T)}
    \KeywordTok{setwd}\NormalTok{(main)}
\end{Highlighting}
\end{Shaded}

\subsection{2.2. Download data from
figshare:}\label{download-data-from-figshare}

To run the analyses or create the paper figures you will now need to
download the large zipped data folder here:\\
\url{https://figshare.com/s/bc27693d6b9002425bff} (DOI: ) and copy -
paste the contents (folders ``in'' and ``out''``) it in the directory:\\
`{[}your local directory path{]}/EBM\_Holsman\_NatComm/data' or simply
run the following script to download and place the data in the correct
sub-folders:

\begin{Shaded}
\begin{Highlighting}[]
    \KeywordTok{cat}\NormalTok{(}\StringTok{"The download takes a few mins (large data files)...}\CharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}

    \NormalTok{url       <-}\StringTok{ "https://ndownloader.figshare.com/files/24216482?private_link=bc27693d6b9002425bff"}
    \NormalTok{dest_path  <-}\StringTok{  }\KeywordTok{file.path}\NormalTok{(main,}\StringTok{"Data/summary_files.zip"}\NormalTok{)}
    \KeywordTok{download.file}\NormalTok{(}\DataTypeTok{url=}\NormalTok{url, }\DataTypeTok{destfile=}\NormalTok{dest_path,}\DataTypeTok{method=}\StringTok{"libcurl"}\NormalTok{)}
    
    \KeywordTok{cat}\NormalTok{(}\StringTok{"}\CharTok{\textbackslash{}n}\StringTok{Download complete...}\CharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
    
    \KeywordTok{unzip} \NormalTok{(}\KeywordTok{file.path}\NormalTok{(main,}\StringTok{"Data/summary_files.zip"}\NormalTok{), }\DataTypeTok{exdir =} \StringTok{"./"}\NormalTok{,}\DataTypeTok{overwrite=}\NormalTok{T)}
    \KeywordTok{cat}\NormalTok{(}\StringTok{"}\CharTok{\textbackslash{}n}\StringTok{Files unzipped successfully...}\CharTok{\textbackslash{}n}\StringTok{"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\subsection{3.1. Set things up:}\label{set-things-up}

The first step is to run the make.R script to load the data, packages,
and setup (where various options are specified). Note that the scripts
depend on a number of packages that will be installed the first time
through running make.R if they are not already included. \emph{A list of
those packages can be found in `EBM\_Holsman\_NatComm/R/packages.R'.}

\begin{Shaded}
\begin{Highlighting}[]
    \CommentTok{# set your local path:}
    \CommentTok{# main        <-  file.path(download_path,"ACLIM-CEATTLE/")}
    \CommentTok{# e.g., main  <-  getwd()}
    \KeywordTok{setwd}\NormalTok{(main)}
    
    
    \CommentTok{# load data, packages, setup, etc.}
    \KeywordTok{source}\NormalTok{(}\StringTok{"R/make.R"}\NormalTok{)}

    \CommentTok{# preview the simulation file:}
    \KeywordTok{head}\NormalTok{(msm_noCapMC)}
    
  \CommentTok{#------------------------------------------------------------------    }
  \CommentTok{# plot Catch from the multispecies run without the cap (catch == ABC):}
  \CommentTok{#------------------------------------------------------------------}
  
   \NormalTok{dat2          <-}\StringTok{ }\KeywordTok{as_tibble}\NormalTok{(msm_noCap)%>%}\KeywordTok{filter}\NormalTok{(age==}\DecValTok{1}\NormalTok{)}
    \KeywordTok{unique}\NormalTok{(dat2$hModev2)}
    \NormalTok{dat2$legend<-}\StringTok{""}
    \NormalTok{for(i in }\DecValTok{1}\NormalTok{:}\KeywordTok{dim}\NormalTok{(run_def)[}\DecValTok{1}\NormalTok{])\{}
      \NormalTok{tt <-}\StringTok{ }\KeywordTok{grepl}\NormalTok{(run_def[i,]$}\StringTok{`}\DataTypeTok{Run title}\StringTok{`}\NormalTok{,dat2$hModev2,}\DataTypeTok{fixed=}\NormalTok{T)}
      \NormalTok{if(}\KeywordTok{any}\NormalTok{(tt))\{}
        \NormalTok{dat2[}\KeywordTok{which}\NormalTok{(tt),]$legend <-}\StringTok{ }\NormalTok{run_def[i,]$Legend}
      \NormalTok{\}}
    \NormalTok{\}}
    \NormalTok{dat2$Scenario <-}\StringTok{ }\KeywordTok{as.factor}\NormalTok{(Scenarios[dat2$Scenario])}
    \NormalTok{dat2$spp      <-}\StringTok{ }\KeywordTok{factor}\NormalTok{(}\KeywordTok{names}\NormalTok{(sppINFO)[dat2$species],}\DataTypeTok{levels=}\KeywordTok{names}\NormalTok{(sppINFO))}
     
    \KeywordTok{dev.new}\NormalTok{()}
    \KeywordTok{ggplot}\NormalTok{(}\DataTypeTok{data=}\NormalTok{dat2) +}
\StringTok{      }\KeywordTok{geom_line}\NormalTok{(}\KeywordTok{aes}\NormalTok{(}\DataTypeTok{x=}\NormalTok{future_year,}\DataTypeTok{y=}\NormalTok{Catch_total_biom,}\DataTypeTok{color=}\NormalTok{Scenario)) +}
\StringTok{      }\KeywordTok{facet_grid}\NormalTok{(spp~}\KeywordTok{factor}\NormalTok{(hModev2),}\DataTypeTok{scales=}\StringTok{"free_y"}\NormalTok{)+}
\StringTok{      }\KeywordTok{theme_minimal}\NormalTok{()}
    
    
  \CommentTok{#------------------------------------------------------------------}
  \CommentTok{# plot Catch from the multispecies run with the cap (catch == ABC):}
  \CommentTok{#------------------------------------------------------------------}
   \NormalTok{dat2          <-}\StringTok{ }\KeywordTok{as_tibble}\NormalTok{(msm_2mtCap)%>%}\KeywordTok{filter}\NormalTok{(age==}\DecValTok{1}\NormalTok{)}
    \KeywordTok{unique}\NormalTok{(dat2$hModev2)}
    \NormalTok{dat2$legend<-}\StringTok{""}
    \NormalTok{for(i in }\DecValTok{1}\NormalTok{:}\KeywordTok{dim}\NormalTok{(run_def)[}\DecValTok{1}\NormalTok{])\{}
      \NormalTok{tt <-}\StringTok{ }\KeywordTok{grepl}\NormalTok{(run_def[i,]$}\StringTok{`}\DataTypeTok{Run title}\StringTok{`}\NormalTok{,dat2$hModev2,}\DataTypeTok{fixed=}\NormalTok{T)}
      \NormalTok{if(}\KeywordTok{any}\NormalTok{(tt))\{}
        \NormalTok{dat2[}\KeywordTok{which}\NormalTok{(tt),]$legend <-}\StringTok{ }\NormalTok{run_def[i,]$Legend}
      \NormalTok{\}}
    \NormalTok{\}}
    \NormalTok{dat2$Scenario <-}\StringTok{ }\KeywordTok{as.factor}\NormalTok{(Scenarios[dat2$Scenario])}
    \NormalTok{dat2$spp      <-}\StringTok{ }\KeywordTok{factor}\NormalTok{(}\KeywordTok{names}\NormalTok{(sppINFO)[dat2$species],}\DataTypeTok{levels=}\KeywordTok{names}\NormalTok{(sppINFO))}
     
    \KeywordTok{dev.new}\NormalTok{()}
    \KeywordTok{ggplot}\NormalTok{(}\DataTypeTok{data=}\NormalTok{dat2) +}
\StringTok{      }\KeywordTok{geom_line}\NormalTok{(}\KeywordTok{aes}\NormalTok{(}\DataTypeTok{x=}\NormalTok{future_year,}\DataTypeTok{y=}\NormalTok{Catch_total_biom,}\DataTypeTok{color=}\NormalTok{Scenario)) +}
\StringTok{      }\KeywordTok{facet_grid}\NormalTok{(spp~}\KeywordTok{factor}\NormalTok{(hModev2),}\DataTypeTok{scales=}\StringTok{"free_y"}\NormalTok{)+}
\StringTok{      }\KeywordTok{theme_minimal}\NormalTok{()}
\end{Highlighting}
\end{Shaded}

\section{4 Primary and Intermediate Data sources and
models}\label{primary-and-intermediate-data-sources-and-models}

Various simulation outputs were made available for use in this analysis
through the interdisciplinary
\href{\%22https://www.fisheries.noaa.gov/alaska/ecosystems/alaska-climate-integrated-modeling-project\%22}{Alaska
Climate Integrated Modeling (ACLIM) project}. An overview of the project
and simulation experiments can be found in
\href{\%22https://www.frontiersin.org/articles/10.3389/fmars.2019.00775/full\%22}{Hollowed
et al. 2020}.

\subsection{4.1. Bering10K ROMSNPZ}\label{bering10k-romsnpz}

ACLIM indices used in this analysis can be viewed interactively online
at: \url{https://kholsman.shinyapps.io/aclim}. The indices were produced
for the ACLIM project and derived from the outputs of the Bering10K
ROMSNPZ model. Downscaled hindcasts and CMIP5 projections of
oceanographic and lower trophic conditions from the Bering10K model were
developed as part of the ACLIM project. An overview of these projections
and the Bering10K ROMSNPZ model can be found in
\href{\%22https://academic.oup.com/icesjms/article/76/5/1280/5477847\%22}{Hermann
et al. 2019},
\href{\%22https://gmd.copernicus.org/articles/13/597/2020/\%22}{Kearney
et al. 2020}, and
\href{\%22https://www.frontiersin.org/articles/10.3389/fmars.2019.00775/full\%22}{Hollowed
et al. 2020}. An overview of the Bering10K ROMSNPZ model can be found
\href{\%22https://beringnpz.github.io/roms-bering-sea/intro/\%22}{here}.

Kearney K, Hermann A, Cheng W, Ortiz I, Aydin K (2020) A coupled
pelagic-benthic-sympagic biogeochemical model for the Bering Sea:
documentation and validation of the BESTNPZ model (v2019.08.23) within a
high-resolution regional ocean model. Geosci Model Dev 13:597-650.
\url{DOI:10.5194/gmd-13-597-2020}.

\subsection{4.2. CEATTLE}\label{ceattle}

CEATTLE is a climate-enhanced multispecies stock assessment model for
walleye pollock, Pacific cod, and arrowtooth flounder
(\href{\%22https://www.sciencedirect.com/science/article/pii/S0967064515002751\%22}{Holsman
et al. 2016},
\href{\%22https://archive.afsc.noaa.gov/refm/docs/2019/EBSmultispp.pdf\%22}{2019})
that has been updated annually and included as an appendix to the BSAI
walleye pollock stock assessment
(\href{\%22https://archive.afsc.noaa.gov/refm/docs/2019/GOApollock.pdf\%22}{Ianelli
et al. 2019}) since 2016 as part of the Bering Sea fishery stock
assessment process. As part of ACLIM CEATTLE was coupled to the ROMSNPZ
model and the ATTACH model (below) to generate projections of species
biomass and catch under future climate conditions in the Bering Sea.
Methods for this coupling and projection simulation can be found in
Holsman et al. submitted and Hollowed et al. 2020. The simulation
outputs, scripts, and input data files used to generate these
simulations can be found on the ACLIM-CEATTLE gitrepo and figshare
sites. Details about the CEATTLE model can be found in the
\href{\%22https://archive.fisheries.noaa.gov/afsc/REFM/Docs/2018/BSAI/2018EBSmultispp-508.pdf\%22}{2018
Multispecies assessment} and
\href{\%22https://archive.afsc.noaa.gov/refm/docs/2019/EBSmultispp.pdf\%22}{2019
Assessments}.

Three harvest simulations are included in the available simulations: 1.
Catch = ABC where multispecies assessment simulations (run in ADMB)
using climate naive reference points for BO but climate specific B40 and
projections (climate effects on growth, M2, and recruitment). 2. Catch =
ABC + sloping harvest control rule below B40, and with F = 0 when B
\textless{} B20. 3. As in 2 but where catch\textasciitilde{}f(ABC,TAC)
via the ATTACH package (below).

\subsection{4.3. ATTACH}\label{attach}

The catchfunction package (which we refer to as the ABC To TAC and
Commercial Harvest, aka ATTACH, model: R package rename forthcoming) was
created for the Alaska Climate Integrated Modeling Project (ACLIM) by
Amanda Faig (University of Washington; School of Aquatic Fisheries and
Sciences) and Alan Haynie (NOAA; NMFS). This function, in a nutshell,
takes Bering Sea (BS) acceptable biological catch (ABC) as input and
uses a series of regression estimates to predict total allowable catch
(TAC) and from that the commercial harvest in the Bering Sea, based on
ABC, TAC, and catch data from 1992 to 2017. Documentation and code for
ATTACH can be found on the
\href{\%22https://github.com/amandafaig/catchfunction\%22}{attach
github}.

\end{document}
